<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CopyEventCommand.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">calendar</a> &gt; <a href="index.source.html" class="el_package">calendar.commandobject.copy</a> &gt; <span class="el_source">CopyEventCommand.java</span></div><h1>CopyEventCommand.java</h1><pre class="source lang-java linenums">package calendar.commandobject.copy;

import static calendar.commandobject.ExtractCommandHelper.extractCalendarNameFromCopyEvent;
import static calendar.commandobject.ExtractCommandHelper.extractStartDateTimeFromCopyEvent;
import static calendar.commandobject.ExtractCommandHelper.extractSubjectFromCopyEvent;
import static calendar.commandobject.ExtractCommandHelper.extractTargetDateTimeFromCopyEvent;

import calendar.commandobject.Command;
import calendar.model.modelinterfaces.Calendar;
import calendar.model.modelinterfaces.CalendarManager;
import calendar.model.modelinterfaces.Event;
import java.time.LocalDateTime;

/**
 * class to handle the copying of singular event.
 * from one calendar to another.
 *
 */

public class CopyEventCommand implements Command {

  private final String command;
  private final CalendarManager calendarManager;


  /**
   * Constructor to create edit event command object.
   *
   * @param command         user command
   * @param calendarManager calendar manager object
   */

<span class="fc" id="L33">  public CopyEventCommand(String command, CalendarManager calendarManager) {</span>
<span class="fc" id="L34">    this.command = command;</span>
<span class="fc" id="L35">    this.calendarManager = calendarManager;</span>
<span class="fc" id="L36">  }</span>

  @Override
  public void execute() {

<span class="fc" id="L41">    String subject = extractSubjectFromCopyEvent(command);</span>
<span class="fc" id="L42">    LocalDateTime dateTime = extractStartDateTimeFromCopyEvent(command);</span>
<span class="fc" id="L43">    String calendarName = extractCalendarNameFromCopyEvent(command);</span>
<span class="fc" id="L44">    LocalDateTime targetDateTime = extractTargetDateTimeFromCopyEvent(command);</span>

<span class="fc" id="L46">    Calendar currentCalendar =</span>
<span class="fc" id="L47">        calendarManager.getCalendar(calendarManager.getCurrentCalendarName());</span>

    try {
<span class="fc" id="L50">      Event eventToCopy = getEvent(subject, dateTime, currentCalendar);</span>
<span class="fc" id="L51">      calendar.model.modelinterfaces.Calendar targetCalendar =</span>
<span class="fc" id="L52">          calendarManager.getCalendar(calendarName);</span>

<span class="pc bpc" id="L54" title="1 of 2 branches missed.">      if (!(currentCalendar.copyEventSingle(eventToCopy, targetCalendar, targetDateTime) == null)) {</span>
<span class="fc" id="L55">        System.out.println(&quot;Event has been copied successfully!&quot;);</span>
      }

<span class="fc" id="L58">    } catch (Exception e) {</span>
<span class="fc" id="L59">      System.out.println(e.getMessage());</span>
<span class="fc" id="L60">    }</span>
<span class="fc" id="L61">  }</span>

  /**
   * Searches and gets the event from calendar with provided subject and start date time.
   *
   * @param subject         search term subject
   * @param dateTime        search term date time
   * @param currentCalendar current calendar to search
   * @return Searched event
   * @throws IllegalArgumentException When the event is not present in the calendar
   */

  private Event getEvent(String subject, LocalDateTime dateTime,
                         calendar.model.modelinterfaces.Calendar currentCalendar) throws
      IllegalArgumentException {
<span class="fc bfc" id="L76" title="All 2 branches covered.">    for (Event event : currentCalendar.getCalendarStore().values()) {</span>
<span class="pc bpc" id="L77" title="1 of 2 branches missed.">      if (event.getSubject().equals(subject)</span>
<span class="pc bpc" id="L78" title="1 of 2 branches missed.">          &amp;&amp; event.getStartDate().equals(dateTime.toLocalDate())</span>
<span class="pc bpc" id="L79" title="1 of 2 branches missed.">          &amp;&amp; event.getStartTime().equals(dateTime.toLocalTime())) {</span>
<span class="fc" id="L80">        return event;</span>
      }
<span class="nc" id="L82">    }</span>
<span class="fc" id="L83">    throw new IllegalArgumentException(&quot;Event not found: &quot; + subject + &quot; at &quot; + dateTime);</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>